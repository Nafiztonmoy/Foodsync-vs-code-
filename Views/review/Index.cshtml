@model IEnumerable<FoodWeb.Models.ReviewModel>
@{
    ViewBag.Title = "Food Reviews";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<main id="main-container" class="main-container">
    <div class="container my-5">
        <h2 class="mb-4 text-center">Food Reviews</h2>

        <!-- Reviews Section: Scrollable -->
        <div class="mb-5" style="max-width:600px; margin:auto; max-height:500px; overflow-y:auto; padding-right:10px;">
            @foreach (var review in Model)
            {
                <div class="border p-3 mb-3" style="border-radius:10px; background-color:#fef9f5;">
                    <strong>@review.UserName</strong>
                    <div>
                        @for (int i = 1; i <= 5; i++)
                        {
                            if (i <= review.Rating)
                            {
                                <span style="color:gold; font-size:18px;">&#9733;</span>
                            }
                            else
                            {
                                <span style="color:#ccc; font-size:18px;">&#9733;</span>
                            }
                        }
                    </div>
                    <p>@review.Comment</p>
                    @if (!string.IsNullOrEmpty(review.ImagePath))
                    {
                        <img src="@Url.Content(review.ImagePath)" style="max-width:150px; border-radius:5px;" />
                    }
                    <small class="d-block text-muted">@review.CreatedAt.ToString("dd MMM yyyy HH:mm")</small>
                </div>
            }
        </div>

        <hr />

        <!-- Add Review Form -->
        <div class="mt-4 d-flex justify-content-center">
            <div class="contact-form p-4" style="background-color:#f6b88c; border-radius:10px; max-width:600px; width:100%;">
                <h3 class="text-center mb-4">Add Your Review</h3>

                @using (Html.BeginForm("Add", "Review", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <div class="form-group mb-3">
                        @Html.Label("Name")
                        @Html.TextBox("UserName", "", new { @class = "form-control", placeholder = "Your Name", required = "required" })
                    </div>

                    <div class="form-group mb-3">
                        <label>Rating</label>
                        <div class="star-rating">
                            <input type="radio" id="star5" name="Rating" value="5" /><label for="star5" title="5 stars">&#9733;</label>
                            <input type="radio" id="star4" name="Rating" value="4" /><label for="star4" title="4 stars">&#9733;</label>
                            <input type="radio" id="star3" name="Rating" value="3" /><label for="star3" title="3 stars">&#9733;</label>
                            <input type="radio" id="star2" name="Rating" value="2" /><label for="star2" title="2 stars">&#9733;</label>
                            <input type="radio" id="star1" name="Rating" value="1" /><label for="star1" title="1 star">&#9733;</label>
                        </div>
                    </div>

                    <div class="form-group mb-3">
                        @Html.Label("Comment")
                        @Html.TextArea("Comment", "", new { @class = "form-control", placeholder = "Write your review...", required = "required" })
                    </div>

                    <div class="form-group mb-3">
                        <label>Upload Image</label>
                        <input type="file" name="ImageFile" class="form-control" />
                    </div>

                    <button type="submit" class="btn btn--box btn--medium btn--radius btn--black btn--black-hover-green btn--uppercase font--semi-bold w-100">
                        Submit Review
                    </button>
                }
            </div>
        </div>
    </div>

    <!-- Star Rating CSS -->
    <style>
        .star-rating {
            direction: rtl;
            font-size: 24px;
            unicode-bidi: bidi-override;
            display: inline-block;
        }

            .star-rating input {
                display: none; /* hide radio buttons */
            }

            .star-rating label {
                color: #ccc;
                cursor: pointer;
                transition: color 0.2s;
            }

                .star-rating input:checked ~ label,
                .star-rating label:hover,
                .star-rating label:hover ~ label {
                    color: gold;
                }
    </style>
</main>
